<!--Copyright 2017 Oranitha

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.-->

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>

  <style>
    body {background-color: #201920; font-family: verdana;;}
    select {margin: 10px}
    a {color: #FFF4DC}
    .inc_div {display: inline-block;}
    .inc_button, .rare_button {padding: 5px 3px 3px 3px; width: 27px; margin: none; background: #392839; border:none; font-family: verdana; color:white}
    .encounter_inc_button {padding: 5px 3px 3px 3px; width: 27px; margin: none; background: #392839; border:none; border-right: solid white; font-family: verdana; color:white}
    .inc_button:hover, .rarebutton:hover {color:grey;}
    .light_inc_button {padding: 5px 3px 3px 3px; width: 27px; margin: none; border:none; font-family: verdana; color:white; background: #403040}
    .light_inc_button:hover {color: #555555}
    .stat_field, .rare_field {width: 45px; background:none; text-align: right; border: none; color:white; margin-left: 3px; margin-right: 3px}
    .light_stat_field {padding-top: 5px; padding-bottom: 3px; width: 45px; background:none; text-align: right; border: none; color:white; margin: 0px; height: 100%; background: #2C222B}
    .name_div {width: 200px; text-align: right; color:white; font-size: small; margin: none; padding: 3px 8px 3px 3px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;}
    .name_div:hover {color:grey;}
    .columnheader {width: 77px; color:white; font-size: small; text-align: center; display:inline-block}
    .outputbutton {margin: 10px}
    .rare_button {width: auto; margin: 6px 3px 3px 3px;}
    .rare_field {font-size: small; width: 85%}
    #page_div {margin: 0px 10px 0px 10px}
    #header_div {margin-left:220px}
    #buttons_div{display: inline-block; float: left; margin-right: 30px; height: 100%}
    #monsterlist_div {margin-left:10px}
    #rarebuttons_div {margin-left:5px; padding: 0px}
    #output_container {display: inline; height:100%; width: 50%;}
    #title {text-align: center; color: #DFC48C; font-family: monospace}
    #output_div {color: #DFC48C; margin-left:575px; margin-right: 10px; background-color: #201920; border: none; font-size: 14px; font-family: monospace; resize: vertical;}
  </style> 

</head>
<body onload="setup_page()">
  <div id="page_div">
    <h1 id="title">Coliseum Data Collection Tool (CODACOT)</h1>
    <select id="venue_select" onchange="load_venue()"></select>
    <select id="mode_select" onchange="load_venue()">
      <option>General Data</option>
      <option>Fest Data: Light</option><option>Fest Data: Lightning</option><option>Fest Data: Fire</option><option>Fest Data: Arcane</option><option>Fest Data: Plague</option><option>Fest Data: Earth</option><option>Fest Data: Ice</option><option>Fest Data: Shadow</option><option>Fest Data: Wind</option><option>Fest Data: Water</option><option>Fest Data: Nature</option>
    </select>
    <button id="button_help" class="outputbutton" onclick="show_help()">Show Help</button>
    <button id="button_csv" class="outputbutton" onclick="build_csv()">Get Data</button>
    <div id="header_div"></div>
    <div id="content_div">
      <div id="buttons_div">
        <div id="monsterlist_div"></div>
        <div id="rarebuttons_div">
          <div class="inc_div"><button id="button_egg" class="rare_button" onclick="up_egg()">+ Egg</button><div id="egg_count" class=rare_field>0</div></div>
          <div class="inc_div"><button id="button_apparel" class="rare_button" onclick="up_apparel()">+ Venue Apparel</button><div id="apparel_count" class=rare_field>0</div></div>
          <div class="inc_div"><button id="button_vista" class="rare_button" onclick="up_vista()">+ Vista</button><div id="vista_count" class=rare_field>0</div></div>
          <div class="inc_div"><button id="button_ambush" class="rare_button" onclick="up_ambush()">+ Ambush</button><div id="ambush_count" class=rare_field>0</div></div>
          <div class="inc_div"><button id="button_eliminate" class="rare_button" onclick="up_eliminate()">+ Eliminate</button><div id="eliminate_count" class=rare_field>0</div></div>
          <div class="inc_div"><button id="button_crate" class="rare_button" onclick="up_crate()">+ Crate</button><div id="crate_count" class=rare_field>0</div></div>
        </div>
      </div>
      <div id="output_container"><div id="output_div"></div></div>
    </div>
  </div>

  <script>
    var venues = [{
        name: "Training Fields",
        monsters: [{n:"Amaranth Moth",c:"#6A3353",e:"Neutral"}, {n:"Leafy Moth",c:"#527840",e:"Nature"}, {n:"Bluelight Chipskink",c:"#0DAECA",e:"Lightning"}, {n:"Chipskink",c:"#573319",e:"Fire"}, {n:"Bumble",c:"#A39D59",e:"Neutral"}, {n:"Coral Carpenter",c:"#6C6AAC",e:"Water"},  {n:"Crimson Emperor",c:"#879A9C",e:"Ice"}, {n:"Death's-Head Stag",c:"#8A7B6E",e:"Earth"}, {n:"Yellow Sparrowmouse",c:"#CE8A0D",e:"Plague"}, {n:"Dark Sparrowmouse",c:"#8B4E8C",e:"Shadow"}, {n:"Ember Mouse",c:"#7E401B",e:"Fire"}, {n:"Glowing Pocket Mouse",c:"#72666B",e:"Light"}, {n:"Frosted Pocketmouse",c:"#7A8DA0",e:"Ice"}, {n:"Satin Pocketmouse",c:"#655F96",e:"Shadow"}, {n:"Mith Bruiser",c:"#9CBB3B",e:"Wind"}, {n:"Ceanothus Brawler",c:"#713C6E",e:"Neutral"}, {n:"Luna Mith",c:"#668951",e:"Wind"}, {n:"Brown-Spotted Mith",c:"#865C3B",e:"Earth"}, {n:"Primrose Mith",c:"#FB92A4",e:"Arcane"}, {n:"Emerald Webwing",c:"#197D6C",e:"Lightning"}, {n:"Ruby Webwing",c:"#891B38",e:"Arcane"}, {n:"Sweetpuff",c:"#AF9D95",e:"Light"}, {n:"Ragepuff",c:"#0F0B36",e:"Water"}, {n:"Silky Webwing",c:"#A4B53F",e:"Nature"}, {n:"Webwing Alpha",c:"#DE5D3D",e:"Plague"}]
      },
      {
        name: "Woodland Path",
        monsters: [{n:"Bamboo Phytocat",c:"#442244",e:"Wind"}, {n:"Bluefin Charger",c:"#442244",e:"Ice"}, {n:"Clown Charger",c:"#442244",e:"Plague"}, {n:"Cockatrice",c:"#442244",e:"Lightning"}, {n:"Basilisk",c:"#442244",e:"Plague"}, {n:"Grouse Basilisk",c:"#442244",e:"Light"}, {n:"Coral Basilisk",c:"#442244",e:"Water"}, {n:"Crimson Emperor",c:"#442244",e:"Ice"}, {n:"Death's-Head Stag",c:"#442244",e:"Head Stag"}, {n:"Autumn Dryad",c:"#442244",e:"Earth"}, {n:"Dryad",c:"#442244",e:"Nature"}, {n:"Janustrap",c:"#442244",e:"Shadow"}, {n:"Greenroot Janustrap",c:"#442244",e:"Nature"}, {n:"Leafy Moth",c:"#442244",e:"Nature"}, {n:"Strangler",c:"#442244",e:"Neutral"}, {n:"Blooming Strangler",c:"#442244",e:"Fire"}, {n:"Sakura Owl",c:"#442244",e:"Arcane"}, {n:"Wildwood Owl",c:"#442244",e:"Neutral"}]  
      },
      {
        name: "Scorched Forest",
        monsters: [{n:"Augite Protector",c:"#442244",e:"Neutral"}, {n:"Moss-Covered Golem",c:"#442244",e:"Nature"}, {n:"Banded Owlcat",c:"#442244",e:"Wind"}, {n:"Red-Winged Owlcat",c:"#442244",e:"Neutral"}, {n:"Centaur Archer",c:"#442244",e:"Plague"}, {n:"Wintermane Bowman",c:"#442244",e:"Ice"}, {n:"Clown Charger",c:"#442244",e:"Plague"}, {n:"Crowned Bonepriest",c:"#442244",e:"Light"}, {n:"Death's-Head Stag",c:"#442244",e:"Earth"}, {n:"Extinguished Jackalope",c:"#442244",e:"Neutral"}, {n:"Searing Jackalope",c:"#442244",e:"Fire"}, {n:"Painted Centaur",c:"#442244",e:"Fire"}, {n:"Wintermane Spearman",c:"#442244",e:"Lightning"}, {n:"Rambra",c:"#442244",e:"Earth"}, {n:"Zeeba",c:"#442244",e:"Shadow"}, {n:"Smoke Gyre",c:"#442244",e:"Fire"}, {n:"Steam Gyre",c:"#442244",e:"Water"}, {n:"Umberhorn Qiriq",c:"#442244",e:"Arcane"}]
      },
      {
        name: "Sandswept Delta",
        monsters: [{n:"Carmine Serthis",c:"#442244",e:"Arcane"}, {n:"Opheodrys Serthis",c:"#442244",e:"Wind"}, {n:"Crowned Bonepriest",c:"#442244",e:"Light"}, {n:"Fan Scorpion",c:"#442244",e:"Fire"}, {n:"Peacock Scorpion",c:"#442244",e:"Neutral"}, {n:"Fuiran",c:"#442244",e:"Nature"}, {n:"Nightsky Fuiran",c:"#442244",e:"Shadow"}, {n:"Greatshell",c:"#442244",e:"Light"}, {n:"Iridescent Scaleback",c:"#442244",e:"Water"}, {n:"Scaleback",c:"#442244",e:"Ice"}, {n:"Serthis Alchemist",c:"#442244",e:"Plague"}, {n:"Serthis Potionmaster",c:"#442244",e:"Light"}, {n:"Shadow Serpent",c:"#442244",e:"Shadow"}, {n:"Shattered Serpent",c:"#442244",e:"Earth"}, {n:"Storm Seeker",c:"#442244",e:"Lightning"}]
      },
      {
        name: "Forgotten Cave",
        monsters: [{n:"Ancient Fungus",c:"#442244",e:"Fire"}, {n:"Dwarf Truffle",c:"#442244",e:"Ice"}, {n:"Blue Dragon Snail",c:"#442244",e:"Water"}, {n:"Crimson Reef Snail",c:"#442244",e:"Neutral"}, {n:"Blueband Duelist",c:"#442244",e:"Water"}, {n:"Venomblade Assassin",c:"#442244",e:"Neutral"}, {n:"Bramble Guardian",c:"#442244",e:"Shadow"}, {n:"Parasitic Fungus",c:"#442244",e:"Plague"}, {n:"Centaur Berserker",c:"#442244",e:"Earth"}, {n:"Swiftfoot Slayer",c:"#442244",e:"Wind"}, {n:"Citrine Jewel",c:"#442244",e:"Light"}, {n:"Emerald Jewel",c:"#442244",e:"Lightning"}, {n:"Corpse Cleaner",c:"#442244",e:"Earth"}, {n:"Cursed Bat",c:"#442244",e:"Nature"}, {n:"Runic Bat",c:"#442244",e:"Arcane"}, {n:"Deepmine Aardvark",c:"#442244",e:"Neutral"}, {n:"Peacevine Aardvark",c:"#442244",e:"Earth"}]
      },
      {
        name: "Bamboo Falls",
        monsters: [{n:"Baku",c:"#442244",e:"Lightning"}, {n:"Dream Eater",c:"#442244",e:"Arcane"}, {n:"Blacktalon Striker",c:"#442244",e:"Wind"}, {n:"Raptorik Warrior",c:"#442244",e:"Water"}, {n:"Carmine Serthis",c:"#442244",e:"Arcane"}, {n:"Opheodrys Serthis",c:"#442244",e:"Wind"}, {n:"Ethereal Trickster",c:"#442244",e:"Ice"}, {n:"Trick-of-the-Light",c:"#442244",e:"Light"}, {n:"Fungalhoof Qiriq",c:"#442244",e:"Plague"}, {n:"Gale Wolf",c:"#442244",e:"Wind"}, {n:"Umbra Wolf",c:"#442244",e:"Shadow"}, {n:"Hainu",c:"#442244",e:"Earth"}, {n:"Red-Breasted Hainu",c:"#442244",e:"Fire"}, {n:"Mantled Foo",c:"#442244",e:"Nature"}, {n:"Tigerblood Foo",c:"#442244",e:"Neutral"}, {n:"Tengu",c:"#442244",e:"Neutral"}, {n:"Wandering Surge Priest",c:"#442244",e:"Water"}]
      },
      {
        name: "Redrock Cove",
        monsters: [{n:"Maren Defender",c:"#442244",e:"Ice"}, {n:"Maren Spearmaiden",c:"#442244",e:"Neutral"}, {n:"Oceansurf Magus",c:"#442244",e:"Water"}, {n:"Waveswell Sorcerer",c:"#442244",e:"Neutral"}, {n:"Noxious Coralclimber",c:"#442244",e:"Neutral"}, {n:"Leopard Coralclimber",c:"#442244",e:"Light"}, {n:"Murkbottom Gull",c:"#442244",e:"Plague"}, {n:"Tradewinds Gull",c:"#442244",e:"Wind"}, {n:"Riptide Clipper",c:"#442244",e:"Water"}, {n:"Sandshore Snipper",c:"#442244",e:"Fire"}, {n:"Mirage Puffer",c:"#442244",e:"Neutral"}, {n:"Daydream Puffer",c:"#442244",e:"Water"}, {n:"Mottled Sea Serpent",c:"#442244",e:"Earth"}, {n:"Highfin Sea Serpent",c:"#442244",e:"Water"}, {n:"Dainty Wavehopper",c:"#442244",e:"Arcane"}, {n:"Vivid Wavehopper",c:"#442244",e:"Nature"}, {n:"Deeprealm Hunter",c:"#442244",e:"Shadow"}, {n:"Spiney Whale",c:"#442244",e:"Lightning"}] 
      },
      {
        name: "Waterway",
        monsters: [{n:"Blueridge Greatshell",c:"#442244",e:"Wind"}, {n:"Brown River Flight",c:"#442244",e:"Plague"}, {n:"Grey River Flight",c:"#442244",e:"Water"}, {n:"Cumulus Seal",c:"#442244",e:"Ice"}, {n:"Dappled Seal",c:"#442244",e:"Earth"}, {n:"Everglade Lasher",c:"#442244",e:"Nature"}, {n:"Greater Sandstrike",c:"#442244",e:"Earth"}, {n:"Granite Thresher",c:"#442244",e:"Fire"}, {n:"Shale Thresher",c:"#442244",e:"Lightning"}, {n:"Maren Currentfinder",c:"#442244",e:"Neutral"}, {n:"Maren Shark Hunter",c:"#442244",e:"Water"}, {n:"Noggle",c:"#442244",e:"Light"}, {n:"Sunset Lasher",c:"#442244",e:"Arcane"}, {n:"Radioactive Slime",c:"#442244",e:"Neutral"}, {n:"River Muck",c:"#442244",e:"Water"}, {n:"Rainbow Sprite",c:"#442244",e:"Ice"}, {n:"Scarlet Flycatcher",c:"#442244",e:"Arcane"}]
      },
      {
        name: "Arena",
        monsters: [{n:"Boran Veteran",c:"#442244",e:"Lightning"}, {n:"Spellwall Boran",c:"#442244",e:"Arcane"}, {n:"Celestial Antelope",c:"#442244",e:"Light"}, {n:"Silver Springbok",c:"#442244",e:"Ice"}, {n:"Charcoal Sprangyroo",c:"#442244",e:"Neutral"},  {n:"Sprangyroo",c:"#442244",e:"Fire"}, {n:"Chimera",c:"#442244",e:"Neutral"}, {n:"Double-Tailed Warcat",c:"#442244",e:"Neutral"}, {n:"Warcat Protector",c:"#442244",e:"Nature"}, {n:"Goldenplains Poodle Mith",c:"#442244",e:"Light"}, {n:"Marshland Poodle Mith",c:"#442244",e:"Shadow"}, {n:"Longneck Interloper",c:"#442244",e:"Earth"}, {n:"Longneck Skirmisher",c:"#442244",e:"Wind"}, {n:"Longneck Magi",c:"#442244",e:"Water"}, {n:"Longneck Mender",c:"#442244",e:"Light"}, {n:"Featherback Boar",c:"#442244",e:"Light"}, {n:"Undying Featherback",c:"#442244",e:"Plague"}]
      },
      {
        name: "Volcanic Vents",
        monsters: [{n:"Spectral Duskflapper",c:"#2163A3",e:"Water"}, {n:"Armored Duskflapper",c:"#794D46",e:"Neutral"}, {n:"Chillwind Harpy",c:"#68729C",e:"Ice"}, {n:"Stormcloud Harpy",c:"#084158",e:"Lightning"},{n:"Flamescale Illusionist",c:"#41417B",e:"Neutral"}, {n:"Flamescale Venomcaster",c:"#3C5E35",e:"Plague"}, {n:"Fiendcat",c:"#528E1D",e:"Wind"}, {n:"Flamerest Fiendcat",c:"#ED7912",e:"Fire"}, {n:"Ashspine Widow",c:"#743F44",e:"Earth"}, {n:"Firebelly Weaver",c:"#8085A4",e:"Ice"}, {n:"Dreadram",c:"#900010",e:"Fire"}, {n:"Ultraram",c:"#7930D8",e:"Arcane"}, {n:"Flamescale Spearman",c:"#4D3242",e:"Plague"}, {n:"Flamescale Lancer",c:"#7C634E",e:"Light"}, {n:"Ghost Manticore",c:"#20263F",e:"Neutral"}, {n:"Firemane Manticore",c:"#50210B",e:"Fire"}, {n:"Basalt Vent Hop",c:"#56281E",e:"Neutral"}, {n:"Magma Runner",c:"#76223A",e:"Lightning"}, {n:"Nightfall Imp",c:"#282E4E",e:"Shadow"}, {n:"Ignited Imp",c:"#D02D00",e:"Fire"}, {n:"Serthis Loremaster",c:"#517F6C",e:"Nature"}, {n:"Serthis Archivist",c:"#99885F",e:"Light"}, {n:"Ophiotaurus",c:"#665A4F",e:"Nature"}, {n:"Ashscale Ophiotaurus",c:"#7A552A",e:"Fire"}, {n:"Tunnel Hydra",c:"#826543",e:"Earth"}, {n:"Hydra",c:"#64313B",e:"Arcane"}]
      }, 
      {
        name: "Rainsong Jungle",
        monsters: [{n:"Barkback Boar",c:"#442244",e:"Nature"}, {n:"Deadwood Boar",c:"#442244",e:"Earth"}, {n:"Budwing Morpho",c:"#442244",e:"Nature"}, {n:"Petal Jumper",c:"#442244",e:"Arcane"}, {n:"Clown Hippocampus",c:"#442244",e:"Fire"}, {n:"Hippocampus",c:"#442244",e:"Neutral"}, {n:"King Parda",c:"#442244",e:"Nature"}, {n:"Parda",c:"#442244",e:"Neutral"}, {n:"Manticore Screamer",c:"#442244",e:"Shadow"}, {n:"Proto Manticore",c:"#442244",e:"Earth"}, {n:"Paradise Zalis",c:"#442244",e:"Ice"}, {n:"Zalis",c:"#442244",e:"Water"}, {n:"Ringlet Amphithere",c:"#442244",e:"Wind"}, {n:"Ultramel Amphithere",c:"#442244",e:"Plague"}, {n:"Goldenbeast",c:"#442244",e:"Light"}, {n:"Overcharged Silverbeast",c:"#442244",e:"Lightning"}]
      },
      {
        name: "Boreal Woods",
        monsters: [{n:"Black Wolf",c:"#442244",e:"Shadow"}, {n:"Winter Wolf",c:"#442244",e:"Neutral"}, {n:"Shalebuck",c:"#442244",e:"Water"}, {n:"Venerable Shalebuck",c:"#442244",e:"Arcane"}, {n:"Squall Rasa",c:"#442244",e:"Lightning"}, {n:"Maned Rasa",c:"#442244",e:"Earth"}, {n:"Nochnyr",c:"#442244",e:"Fire"}, {n:"Permafrost Impaler",c:"#442244",e:"Ice"}, {n:"Elk",c:"#442244",e:"Nature"}, {n:"Snowfall Elk",c:"#442244",e:"Light"}, {n:"Longneck Hunter",c:"#442244",e:"Neutral"}, {n:"Longneck Wanderer",c:"#442244",e:"Wind"}, {n:"Hoarfrost Mauler",c:"#442244",e:"Ice"}, {n:"Poultrygeist",c:"#442244",e:"Plague"}, {n:"Coarsefur Yeti",c:"#442244",e:"Ice"}]
      },
      {
        name: "Boreal Woods (Thanksgiving)",
        monsters: [{n:"Black Wolf",c:"#442244",e:"Shadow"}, {n:"Winter Wolf",c:"#442244",e:"Neutral"}, {n:"Shalebuck",c:"#442244",e:"Water"}, {n:"Venerable Shalebuck",c:"#442244",e:"Arcane"}, {n:"Squall Rasa",c:"#442244",e:"Lightning"}, {n:"Maned Rasa",c:"#442244",e:"Earth"}, {n:"Nochnyr",c:"#442244",e:"Fire"}, {n:"Permafrost Impaler",c:"#442244",e:"Ice"}, {n:"Elk",c:"#442244",e:"Nature"}, {n:"Snowfall Elk",c:"#442244",e:"Light"}, {n:"Longneck Hunter",c:"#442244",e:"Neutral"}, {n:"Longneck Wanderer",c:"#442244",e:"Wind"}, {n:"Hoarfrost Mauler",c:"#442244",e:"Ice"}, {n:"Poultrygeist",c:"#442244",e:"Plague"}, {n:"Woodland Turkey",c:"#442244",e:"Earth"}, {n:"Coarsefur Yeti",c:"#442244",e:"Ice"}]
      },
      {
        name: "Crystal Pools",
        monsters: [{n:"Almandine Sturgeon",c:"#442244",e:"Neutral"}, {n:"Amber Gulper",c:"#442244",e:"Fire"}, {n:"Apatite Fisher",c:"#442244",e:"Lightning"}, {n:"Rhodochrosite Crane",c:"#442244",e:"Arcane"}, {n:"Arctic Hippalectryon",c:"#442244",e:"Ice"}, {n:"Hippalectryon",c:"#442244",e:"Arcane"}, {n:"Chalcedony Snipper",c:"#442244",e:"Arcane"}, {n:"Moonbeam Crayfish",c:"#442244",e:"Neutral"}, {n:"Clearwater Oracle",c:"#442244",e:"Neutral"}, {n:"Maren Warlock",c:"#442244",e:"Plague"}, {n:"Crystalplate Stinger",c:"#442244",e:"Light"}, {n:"Sparkling Stinger",c:"#442244",e:"Nature"}, {n:"Stonewatch Prince",c:"#442244",e:"Earth"}, {n:"Windcarve Fugitive",c:"#442244",e:"Wind"}, {n:"Crystalhide Jester",c:"#442244",e:"Water"}, {n:"Hawksbill Goliath",c:"#442244",e:"Shadow"}]
      },
      {
        name: "Harpy's Roost",
        monsters: [{n:"Blue Tang Hippogriff",c:"#442244",e:"Lightning"}, {n:"Cardinal Hippogriff",c:"#442244",e:"Neutral"}, {n:"Blue Moon Aviar",c:"#442244",e:"Wind"}, {n:"Renegade Aviar",c:"#442244",e:"Earth"}, {n:"Brush Dodo",c:"#442244",e:"Water"}, {n:"Cloud Dancer",c:"#442244",e:"Nature"}, {n:"Sunspot Clouddancer",c:"#442244",e:"Fire"}, {n:"Death Seeker",c:"#442244",e:"Shadow"}, {n:"Storm Seeker",c:"#442244",e:"Lightning"}, {n:"Dodo",c:"#442244",e:"Neutral"}, {n:"Hooded Dodo",c:"#442244",e:"Plague"}, {n:"Fallen Streak",c:"#442244",e:"Arcane"}, {n:"Snow Streak",c:"#442244",e:"Ice"}, {n:"Masked Harpy",c:"#442244",e:"Wind"}, {n:"Stonewatch Harpy",c:"#442244",e:"Light"}, {n:"Mesacliff Harpy",c:"#442244",e:"Neutral"}, {n:"Windcarve Harpy",c:"#442244",e:"Wind"}, {n:"Crowned Roc",c:"#442244",e:"Wind"}, {n:"Roc",c:"#442244",e:"Arcane"}]
      },
      {
        name: "Ghostlight Ruins",
        monsters: [{n:"Aer Phantom",c:"#442244",e:"Wind"}, {n:"Lux Spectre",c:"#442244",e:"Light"}, {n:"Carrioncorn",c:"#442244",e:"Neutral"}, {n:"Nightmare",c:"#442244",e:"Fire"}, {n:"Greybeak Reaper",c:"#442244",e:"Neutral"}, {n:"Tengu Caller",c:"#442244",e:"Shadow"}, {n:"Infestation Hound",c:"#442244",e:"Plague"}, {n:"Wraith Hound",c:"#442244",e:"Lightning"}, {n:"Longneck Medium",c:"#442244",e:"Neutral"}, {n:"Longneck Scholar",c:"#442244",e:"Nature"}, {n:"Otherworldly Aura",c:"#442244",e:"Arcane"}, {n:"Somber Spirit",c:"#442244",e:"Shadow"}, {n:"Pronghorn Stomper",c:"#442244",e:"Water"}, {n:"Wendigo",c:"#442244",e:"Earth"}, {n:"Shatterbone Vulture",c:"#442244",e:"Ice"}, {n:"Tatterwing Carcass",c:"#442244",e:"Shadow"},  {n:"Disoriented Spirit",c:"#442244",e:"Neutral"}, {n:"Malevolent Spirit",c:"#442244",e:"Nature"}]
      },
      {
        name: "Mire",
        monsters: [{n:"Blackwing Croaker",c:"#442244",e:"Shadow"}, {n:"Heartred Croaker",c:"#442244",e:"Plague"}, {n:"Brilliant Psywurm",c:"#442244",e:"Light"}, {n:"Psywurm",c:"#442244",e:"Arcane"}, {n:"Common Podid",c:"#442244",e:"Lightning"}, {n:"Southmarsh Podid",c:"#442244",e:"Neutral"}, {n:"Mistwatch Shellion",c:"#442244",e:"Ice"}, {n:"Shellion",c:"#442244",e:"Neutral"}, {n:"Mossy Cerdae",c:"#442244",e:"Plague"}, {n:"Wetland Unicorn",c:"#442244",e:"Neutral"},  {n:"Poisonous Toridae",c:"#442244",e:"Nature"}, {n:"Venomous Toridae",c:"#442244",e:"Earth"}, {n:"Salve Kamaitachi",c:"#442244",e:"Wind"}, {n:"Scythe Kamaitachi",c:"#442244",e:"Plague"}, {n:"Sickle Kamaitachi",c:"#442244",e:"Fire"},{n:"Molten Wartoad",c:"#442244",e:"Fire"},  {n:"Wartoad",c:"#442244",e:"Water"}]
      },
      {
        name: "Kelp Beds",
        monsters: [{n:"Abyss Striker",c:"#442244",e:"Shadow"}, {n:"Relic Eel",c:"#442244",e:"Earth"}, {n:"Cloud Chaser",c:"#442244",e:"Wind"}, {n:"Golden Porpoise",c:"#442244",e:"Light"}, {n:"Corrosive Depin",c:"#442244",e:"Shadow"}, {n:"Depin",c:"#442244",e:"Neutral"}, {n:"Jeweled Octoflyer",c:"#442244",e:"Arcane"}, {n:"Octoflyer",c:"#442244",e:"Water"}, {n:"Kelp Tender",c:"#442244",e:"Water"}, {n:"Mammertee",c:"#442244",e:"Neutral"}, {n:"Maren Ambusher",c:"#442244",e:"Nature"}, {n:"Maren Warrior",c:"#442244",e:"Lightning"}, {n:"Maren Scout",c:"#442244",e:"Fire"}, {n:"Maren Wavesinger",c:"#442244",e:"Water"}, {n:"Mantarune",c:"#442244",e:"Ice"}, {n:"Wave Sweeper",c:"#442244",e:"Plague"}]
      },
      {
        name: "Golem Workshop",
        monsters: [{n:"Black Iron Creeper",c:"#442244",e:"Fire"}, {n:"Coppercoil Creeper",c:"#442244",e:"Lightning"}, {n:"Chromefeather Lookout",c:"#442244",e:"Lightning"}, {n:"Sentry Squawker",c:"#442244",e:"Neutral"}, {n:"Clattercog Engineer",c:"#442244",e:"Water"}, {n:"Monkey Wrench",c:"#442244",e:"Neutral"}, {n:"Construction Mith",c:"#442244",e:"Nature"}, {n:"Sentinel Mith",c:"#442244",e:"Plague"}, {n:"Mistral Minion",c:"#442244",e:"Wind"}, {n:"Spellbound Golem",c:"#442244",e:"Arcane"}, {n:"Scrapmetal Tracker",c:"#442244",e:"Shadow"}, {n:"Steelhound",c:"#442244",e:"Neutral"}, {n:"Swift Lumen",c:"#442244",e:"Light"}, {n:"Swift Volt",c:"#442244",e:"Lightning"}, {n:"Frost Delver",c:"#442244",e:"Ice"}, {n:"Stone Borer",c:"#442244",e:"Earth"}]
      }

    ];

    var trait_ref = [];
    var mode_stats = [["#Fought","Food","Materials","Familiars"],["#Fought","Currency","Chests","Food","Materials","Familiars"]];

    //The most hideous function by far. If you can figure out what this is doing, I salute you.
    function build_csv(){
      var sep = "</br>-------------------------------------------</br>";
      var out = (sep+"YOUR STATS"+sep).substring(5); //haha yuck
      var mode = document.getElementById("mode_select").selectedIndex;
      var monsters = [];
      var traits = ["Name"];
      var totals = [];
      var full_stack = [];
      var all_kinds = [];
      var raw = "";
      var csv = "";
      var rares = [];
      var raresum = 0;
      if(mode == 0){traits.push.apply(traits, mode_stats[0]);} else {traits.push.apply(traits, mode_stats[1]);}
      for(var i = 0, len = traits.length; i < len; i ++) {totals.push(0); full_stack.push(false); all_kinds.push(true);}
      csv += traits;

      //This bit is complicated--we're reading through the name and data fields, using our mode to figure out how many fields
      for (var i = 0, out_len = trait_ref.length, in_len = traits.length; i < out_len; i+=in_len){
        csv += "</br>"+trait_ref[i].innerHTML;
        for (var j = 1; j < in_len; j++){
          var val = +trait_ref[i+j].value;
          csv += (","+val);
          raw += (","+val);
          totals[j]+= +val;
          if(val>98){full_stack[j-1]=true;}
          all_kinds[j-1] = all_kinds[j-1] && val;
        }
      }

      rares.push(totals[1],+document.getElementById("egg_count").innerHTML,+document.getElementById("apparel_count").innerHTML,
      +document.getElementById("vista_count").innerHTML,+document.getElementById("ambush_count").innerHTML,
      +document.getElementById("eliminate_count").innerHTML,+document.getElementById("crate_count").innerHTML);

      raresum = rares.slice(1).reduce((a, b) => a + b, 0);
      raw = rares + raw;
      raw = (document.getElementById("venue_select").options[document.getElementById("venue_select").selectedIndex].value+","+document.getElementById("mode_select").options[mode].value+",").concat(raw);

      out += "</br>Numerical Breakdown"+sep;
      for(var i = 1, len = totals.length; i < len; i ++){
        out+=("Total "+traits[i]+": "+totals[i]+"</br>");
      }
      out +=("Total Rares: "+raresum+"</br>");

      for(var i = 2, len = totals.length; i < len; i ++){
        out+=(traits[i]+" Drop Rate: "+totals[i]/totals[1]*100+"%</br>");
      }
      out +=("Rares Drop Rate: "+raresum/totals[1]*100+"%</br>"); 

      out += "</br>Achievements"+sep;
      //Mode independent
      if(totals[1]>99){out+="DATA SAMPLER</br>";}
      if(totals[1]>249){out+="BIG DATA</br>";}
      if(totals[1]>499){out+="HUGE DATA</br>";}
      if(rares[1]){out+="DR. EGGMAN</br>";}
      if(rares[2]){out+="BATTLFIELD FASHION</br>";}
      if(rares[3]){out+="WIDE-OPEN VISTAS</br>";}
      if(rares[4]){out+="IT'S AN AMBUSH!</br>";}
      if(rares[5]){out+="ELIMINATING THE COMPETITION</br>";}
      if(rares[6]){out+="CRATE EXPECTATIONS</br>";}
      if(all_kinds[0]){out+="GALLERY OF ROGUES</br>";}
      if(full_stack[0]){out+="LOCALIZED EXTINCTION</br>";}
      if(raresum>0){out+="LUCKY BREAK</br>";}
      if(raresum>2){out+="RNG WARRIOR</br>";}
      //if(you_read_this){out+="MASTER OF MYSTERIES"}...congratulations, reader!

      //General Data only
      if(mode == 0){
        out+="GENERALIST</br>";
        if(totals[2]>99){out+="CORNUCOPIA</br>";}
        if(totals[3]>99){out+="MATERIAL MOGUL</br>";}
        if(totals[2]>199){out+="GODLY CHEF</br>";}
        if(totals[3]>199){out+="LORD OF THE JUNK PILE</br>";}
        if(totals[4]>4){out+="GOTTA CATCH 'EM ALL</br>";}
        if(totals[4]>9){out+="NATIONAL DEX</br>";}
        if(all_kinds[1]){out+="CULINARY SAMPLER</br>";}
        if(all_kinds[2]){out+="MISCELLANIA MASTER</br>";}
        if(all_kinds[3]){out+="GARY MUTHAFLIPPIN' OAK</br>";}
        if(full_stack[1]){out+="THE WHOLE ENCHILADA</br>";}
        if(full_stack[2]){out+="MATERIAL WEALTH</br>";}
      }
      //Fest only
      if(mode > 0){
        out+="FESTIVE FINDER</br>";
        if((trait_ref.length / 3)<5){out+="RARE DATA COLLECTOR</br>";}
        if(totals[2]>29){out+="FEST FREQUENT FLIER</br>";}
        if(totals[2]>59){out+="FEST FANATIC</br>";}
        if(totals[2]>99){out+="LITERALLY JOXAR</br>";}
        if(totals[3]>0){out+="CHEST COLLECTOR</br>";}
        if(totals[3]>2){out+="CHEST CHAMPION</br>";}
        if(all_kinds[1]){out+="CURRENCY SHAKEDOWN</br>";}
        if(all_kinds[2]){out+="CHEST COMMANDER</br>";}
        if(full_stack[1]){out+="BOURGEOISE WILDLIFE</br>";}
      }
      out += "</br></br></br></br>------------------------------------------------------------------------------</br>Data below this point is not explicitly human-readable, consider donating it for analysis!</br></br>"
      +sep+"RAW DATA"+sep+"Raw data can be donated "+"here".link("http://goo.gl/forms/pgvVoPLbaCSD0uSt2")+".</br></br>";
      out += raw;
      out += "</br>"+sep+"DATA CSV (for advanced users)"+sep;
      out += csv;
      out += "</br>"+sep+"RARES CSV (for advanced users)"+sep+"Fought,Eggs,Apparel,Vista,Ambush,Eliminate,Crate</br>"
      out += rares;
      document.getElementById("output_div").innerHTML = out;
    }

    //surely there's a better way?
    function up_egg(){e = document.getElementById("egg_count");  val = e.innerHTML; val++; e.innerHTML = val;}
    function up_apparel(){e = document.getElementById("apparel_count");  val = e.innerHTML; val++; e.innerHTML = val;}
    function up_vista(){e = document.getElementById("vista_count");  val = e.innerHTML; val++; e.innerHTML = val;}
    function up_eliminate(){e = document.getElementById("eliminate_count");  val = e.innerHTML; val++; e.innerHTML = val;}
    function up_ambush(){e = document.getElementById("ambush_count");  val = e.innerHTML; val++; e.innerHTML = val;}
    function up_crate(){e = document.getElementById("crate_count");  val = e.innerHTML; val++; e.innerHTML = val;}

    function add_clickable(creature_name, creature_color, stat_list) {

      var container = document.createElement("div");
      var text = document.createElement("div");
      text.innerHTML = creature_name;
      trait_ref.push(text);
      text.className += " name_div"
      text.style.display = "inline-block";
      text.style.background = creature_color;
      container.style.border = "thin solid "+creature_color;
      container.appendChild(text);

      for (var i = 0, len = stat_list.length; i < len; i++){
         var temp_label = document.createElement("input");
         var temp_button = document.createElement("input");
         gen_basic_textfield(temp_label, stat_list, i);
         gen_basic_button(temp_button, temp_label, i);
         trait_ref.push(temp_label);
         container.appendChild(temp_label);
         container.appendChild(temp_button);
         if(i==0){
             var mem = temp_label; //Because scoping.
             var mem_b = temp_button;
             text.onclick = function() {
             val = mem.value;
             val++;
             mem.value = val;
             }
         }
      }

      var parent_div = document.getElementById("monsterlist_div");
      parent_div.appendChild(container);
    }

    function gen_basic_textfield(element, stat_list, offset){
      element.type = "text";
      element.value = "0";
      element.name = stat_list[offset];
      if(offset%2==0){element.className += " stat_field";}
      else{element.className += "light_stat_field";}
    }

    function gen_basic_button(button, linked_element, offset) {
      button.type = "button";
      button.value = "+";
      if(!offset){button.className += "encounter_inc_button";}
      else if(offset%2==0){button.className += " inc_button";}
      else{button.className += "light_inc_button";}
      button.onclick = function() {
        val = linked_element.value;
        val++;
        linked_element.value = val;
      }
    }

    function show_help() {
      var selected_mode = document.getElementById("mode_select").selectedIndex;
      if(selected_mode==0){
        document.getElementById("output_div").innerHTML = "WHAT THIS IS</br>------------</br></br>CODACOT is used to track coliseum data: the number of enemies encountered, food drops, rare items, etc. It can also turn this data into interesting stats, and even award achievements!</br></br></br>HOW TO USE IT</br>-------------</br></br>Pick a venue and data type from the dropdown menus in the top-left.</br>The text on top of the list tells you what data is tracked in each column.<br><br>If you're collecting 'General Data' in the 'Training Fields,' the first row will be Amaranth Moth, then columns for Number Fought, Food, Materials, Familiars. Click the + button in the #Fought column once for each Amaranth Moth you defeat, the + button in the Food column for each food item dropped by an Amaranth Moth, etc.<br><br>If you hit + too much, just click on the number to edit it. For faster use, click an opponent&#39;s name to increment its &quot;# Fought&quot; counter. Vault all food/items/familiars from venue enemies and, when you finish fighting, visit your hoard and enter item totals directly into the counter.<br><br>Get a rare item? Check the bottom of the page; there are special counters for those!<br><br></br>GETTING DATA</br>-------------</br></br>Hit the &quot;Get Data&quot; button to get stats and achievements, as well as raw data that you can donate to the data repository. You can view the data repository "+"here".link("https://docs.google.com/spreadsheets/d/1VsBY6QZCXVwp-K62tbYZpXcDBjJ12Qpz-M_EPE-osbM/edit?usp=sharing")+".";
      } else {
        document.getElementById("output_div").innerHTML = "When collecting festival data, ONLY collect data for fights that involve exactly one relevant species (fest element or neutral). Otherwise, you can never tell just who dropped the item. If you get a rare item from a fight that has zero relevant species, or 2+, do NOT count it using the buttons on the bottom!<br><br>Thanks for your help!";
      }
    }

    function setup_page() {
      var select_list = document.getElementById("venue_select");
      for (var i = 0, len = venues.length; i < len; i++) {
        var option = document.createElement("option");
        option.value = venues[i].name;
        option.text = venues[i].name;
        select_list.appendChild(option);
      }
      option.selectedIndex = 0;
      load_venue();
      show_help();
    }

    function load_venue() {
      var selected_venue = document.getElementById("venue_select").selectedIndex;
      var selected_mode = document.getElementById("mode_select").selectedIndex;
      var venue_monsters = venues[selected_venue].monsters;
      var monsterlist_div = document.getElementById("monsterlist_div");
      var columnheader_div = document.getElementById("header_div");
      var stats;
      var header = document.createElement("div");

      while (monsterlist_div.firstChild) {monsterlist_div.removeChild(monsterlist_div.firstChild);}
      while (columnheader_div.firstChild) {columnheader_div.removeChild(columnheader_div.firstChild);}
      trait_ref = [];
      document.getElementById("egg_count").innerHTML = 0;
      document.getElementById("apparel_count").innerHTML = 0;
      document.getElementById("vista_count").innerHTML = 0;
      document.getElementById("eliminate_count").innerHTML = 0;
      document.getElementById("ambush_count").innerHTML = 0;
      document.getElementById("crate_count").innerHTML = 0;

      if (selected_mode == 0){
        stats=mode_stats[0];
        for (var i = 0, len = venue_monsters.length; i < len; i++){
          add_clickable(venue_monsters[i].n,venue_monsters[i].c,stats);
        }
      }

      if (selected_mode > 0){
        stats=mode_stats[1];
        var fest_element = document.getElementById("mode_select").options[selected_mode].value.substring(11);
        for (var i = 0, len = venue_monsters.length; i < len; i++){
          if(venue_monsters[i].e=="Neutral" || venue_monsters[i].e==fest_element){
            add_clickable(venue_monsters[i].n,venue_monsters[i].c,stats);
          }  
        }
      }

      for (var i = 0, len = stats.length; i < len; i++){
        var colhead = document.createElement("div");
        colhead.className += "columnheader";
        colhead.innerHTML = stats[i];
        columnheader_div.appendChild(colhead);
      }
      show_help()
    }
  </script>
</body>
</html>
